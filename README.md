A class that handle Keyframe animation without external css files used to store keyframe name and behaviour


The constructor allow us to setup an animation with differents properties

constructor(
    durationInSecond: number = 1,
    delayInSecond: number = 0,
    direction: "normal" | "reverse" | "alternate" | "alternate-reverse" = "normal",
    iterationCount: number = 1,
    timingFunction: "ease" | "ease-in" | "ease-out" | "ease-in-out" | "linear" | "step-start" | "step-end" = "ease",
    fillMode: "none" | "forwards" | "backwards" | "both" = "forwards",
    playState: "paused" | "running" = "running",
) {
    //....
}


Once an instance is created, you can add multiple animation steps using KeyframeAnimation.addStep(style:any)
For example :

const anim = new KeyframeAnimation();
anim.addStep({width:100,height:100})
anim.addStep({width:200,height:200})




When every steps are defined, you can generate the css using KeyframeAnimation.generateCss();
This function does 2 things : 

- it return an object with an 'animation' properties with a value based on properties defined in the constructor.
  ==> this is the object that will contains the animation style used in the inline style of the htmlElement

- it will create a string that construct the different keyframes of the animation based on the style got from KeyframeAnimation.addStep

  => the object got from "addStep" is transformed in order to get a valid css in the context of external css-class.
     => properties like 'backgroundColor' will be converted in 'background-color'
     => if a property value is a number and if the property name is inside KeyframeAnimation.pxUnitProperties, the value will be converted in a string with a "px" at the end 


The generated string will be add to the "head" part of the htm page inside a HtmlStyleElement.
If an existing HtmlStyleElement has been generated by KeyframeAnimation, the previous one will be removed from the head before to add the new one.

the HtmlStyleElement is stored in a private static KeyframeAnimation.animationStyles
=> you can clear every keyframe stored in the head using KeyframeAnimation.clearAll();


Usage example in typescript (based on react) : 


import { useState } from "react"
import { KeyframeAnimation } from "./KeyframeAnimation"

export const Test = () => {

    const [css, setCss] = useState({});

    const elementStyle = {
        backgroundColor: "#ff0000",
        width: 100,
        height: 100,
        top: 50,
        left: 50
    }

    const onClick = () => {
        KeyframeAnimation.clearAll();
        const anim = new KeyframeAnimation(3, 0, "normal", 1)

        anim.addStep(elementStyle);
        anim.addStep({
            backgroundColor: "#00ff00",
            width: 200,
            height: 200,
            top: 150,
            left: 150
        })

        setCss(anim.generateCss());
    }

    return <div>
        <div style={{ height: 400, width: "100%" }}>
            <div style={{ position: "absolute", ...elementStyle, ...css }} />
        </div>
        <button onClick={onClick}>CLICK</button>
    </div>
}






